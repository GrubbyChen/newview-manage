{"version":3,"sources":["webpack:///./src/views/Carousel.vue?6ce7","webpack:///src/views/Carousel.vue","webpack:///./src/views/Carousel.vue?88b6","webpack:///./src/views/Carousel.vue","webpack:///./src/views/Carousel.vue?89dd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","row","wrap","name","multiple","action","on","change","uploadImages","type","_v","columns","dataSource","carousels","bordered","scopedSlots","_u","key","fn","staticStyle","cursor","src","filePath","lazy-src","smFilePath","width","height","click","$event","previewImage","record","text","title","onCellChange","_id","data","id","reuploadImage","placement","removeRecord","scrollable","content-class","model","value","callback","$$v","dialog","expression","previewSrc","contain","staticRenderFns","customRender","Carouselvue_type_script_lang_js_","methods","init","_init","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_context","prev","next","axios","get","sent","stop","apply","arguments","info","file","status","_file$response","response","code","msg","$message","success","error","_file$response2","_this","$confirm","content","okText","okType","cancelText","onOk","_onOk","_callee3","_context3","abrupt","Promise","_ref","_callee2","resolve","reject","_context2","post","splice","indexOf","_x","_x2","mounted","_mounted","_callee4","_context4","views_Carouselvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","installComponents_default","VDialog","VImg","VLayout","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Carousel_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Carousel_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6e59a0ce.9ac4a58a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"nvmanage-image\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"page-toolbar\"},[_c('a-upload',{attrs:{\"name\":\"file\",\"multiple\":true,\"action\":\"/newview/manage/uploadCarousel\"},on:{\"change\":_vm.uploadImages}},[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" Click to Upload\\n      \")],1)],1)],1),_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.carousels,\"bordered\":\"\"},scopedSlots:_vm._u([{key:\"filePath\",fn:function(render){return [_c('v-img',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"src\":render.filePath,\"lazy-src\":render.smFilePath,\"width\":144,\"height\":81},on:{\"click\":function($event){_vm.previewImage(render.filePath)}}})]}},{key:\"imageTitle\",fn:function(record){return [_c('editable-cell',{attrs:{\"text\":record.title},on:{\"change\":function($event){_vm.onCellChange(record._id, $event)}}})]}},{key:\"action\",fn:function(record){return _c('span',{staticClass:\"table-action\"},[_c('a-upload',{attrs:{\"name\":\"file\",\"action\":\"/newview/manage/reuploadCarousel\",\"data\":{ id: record._id }},on:{\"change\":function($event){_vm.reuploadImage(record, $event)}}},[_c('a-tooltip',{attrs:{\"placement\":\"top\",\"title\":\"重新上传图片\"}},[_c('a-icon',{attrs:{\"type\":\"upload\"}})],1)],1),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a-tooltip',{attrs:{\"placement\":\"top\",\"title\":\"删除记录\"}},[_c('a-icon',{attrs:{\"type\":\"delete\"},on:{\"click\":function($event){_vm.removeRecord(record)}}})],1)],1)}}])}),_c('v-dialog',{attrs:{\"scrollable\":\"\",\"content-class\":\"image-pre-dialog\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-img',{attrs:{\"src\":_vm.previewSrc,\"contain\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-layout row wrap class=\"nvmanage-image\">\n    <div class=\"page-toolbar\">\n      <a-upload\n        name=\"file\"\n        :multiple=\"true\"\n        action=\"/newview/manage/uploadCarousel\"\n        @change=\"uploadImages\"\n      >\n        <a-button>\n          <a-icon type=\"upload\" /> Click to Upload\n        </a-button>\n      </a-upload>\n    </div>\n\n    <a-table :columns=\"columns\" :dataSource=\"carousels\" bordered>\n      <template slot=\"filePath\" slot-scope=\"render\">\n        <v-img\n          :src=\"render.filePath\"\n          :lazy-src=\"render.smFilePath\"\n          :width=\"144\"\n          :height=\"81\"\n          @click=\"previewImage(render.filePath)\"\n          style=\"cursor: pointer;\"\n        />\n      </template>\n      <template slot=\"imageTitle\" slot-scope=\"record\">\n        <editable-cell :text=\"record.title\" @change=\"onCellChange(record._id, $event)\"/>\n      </template>\n      <!-- <span slot=\"tags\" slot-scope=\"tags\">\n        <a-tag v-for=\"tag in tags\" color=\"blue\" :key=\"tag\">{{tag}}</a-tag>\n      </span> -->\n      <span slot=\"action\" slot-scope=\"record\" class=\"table-action\">\n        <a-upload\n          name=\"file\"\n          action=\"/newview/manage/reuploadCarousel\"\n          :data=\"{ id: record._id }\"\n          @change=\"reuploadImage(record, $event)\"\n        >\n          <a-tooltip placement=\"top\" title=\"重新上传图片\">\n            <a-icon type=\"upload\" />\n          </a-tooltip>\n        </a-upload>\n        <a-divider type=\"vertical\" />\n        <a-tooltip placement=\"top\" title=\"删除记录\">\n          <a-icon type=\"delete\" @click=\"removeRecord(record)\" />\n        </a-tooltip>\n      </span>\n    </a-table>\n\n    <v-dialog\n      v-model=\"dialog\"\n      scrollable\n      content-class=\"image-pre-dialog\"\n    >\n      <v-img :src=\"previewSrc\" contain @click=\"dialog = false\"></v-img>\n    </v-dialog>\n  </v-layout>\n</template>\n\n<script>\nimport axios from '@/tools/axios'\n\nconst columns = [{\n  title: 'Image',\n  scopedSlots: { customRender: 'filePath' }\n}, {\n  title: 'Action',\n  width: '300px',\n  scopedSlots: { customRender: 'action' }\n}]\n\nexport default {\n  data: () => ({\n    carousels: [],\n    columns,\n    dialog: false,\n    previewSrc: ''\n  }),\n  methods: {\n    async init () {\n      this.carousels = await axios.get('/manage/fetchCarousel')\n    },\n    previewImage (filePath) {\n      this.previewSrc = filePath\n      this.dialog = true\n    },\n    uploadImages (info) {\n      let { file, file: { status } } = info\n      if (status === 'done') {\n        const { response: { code, msg } } = file\n        code === '0'\n          ? this.$message.success(`上传成功`)\n          : this.$message.error(msg)\n        this.init()\n      } else if (status === 'error') {\n        this.$message.error(`上传失败`)\n      }\n    },\n    reuploadImage (record, info) {\n      let { file, file: { status } } = info\n      if (status === 'done') {\n        const { response: { code, msg } } = file\n        code === '0'\n          ? this.$message.success(`修改成功`)\n          : this.$message.error(msg)\n        this.init()\n      } else if (status === 'error') {\n        this.$message.error(`修改失败`)\n      }\n    },\n    removeRecord (record) {\n      const _this = this\n      this.$confirm({\n        title: `删除照片`,\n        content: `是否确定要删除？`,\n        okText: '删除',\n        okType: 'danger',\n        cancelText: '取消',\n        async onOk () {\n          return new Promise(async (resolve, reject) => {\n            await axios.post('/manage/removeCarousel', {\n              id: record._id\n            })\n            _this.$message.success(`删除成功`)\n            _this.carousels.splice(_this.carousels.indexOf(record), 1)\n            resolve()\n          })\n        }\n      })\n    }\n  },\n  async mounted () {\n    this.init()\n  }\n}\n</script>\n\n<style lang=\"less\">\n.nvmanage-carousel {\n  padding: 16px;\n}\n.carousel-panel-flex {\n  position: relative;\n  height: 162px;\n  margin-bottom: 56px;\n}\n.carousel-panel {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 288px;\n  height: 162px;\n  box-shadow: 0px 0px 8px 2px rgba(0, 0, 0, 0.1);\n  transition: box-shadow .2s;\n  &:hover {\n    box-shadow: 0px 0px 16px 2px rgba(0, 0, 0, 0.3);\n    .anticon-close-circle {\n      opacity: 1;\n    }\n  }\n  .anticon-close-circle {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    font-size: 20px;\n    color: #fafafa;\n    cursor: pointer;\n    opacity: 0;\n    transition: all .2s;\n  }\n}\n.carousel-image {\n  cursor: pointer;\n}\n\n.carousel-panel-upload {\n  border: 2px dashed #dedede;\n  background-color: #fdfdfd;\n  cursor: pointer;\n  &:hover {\n    box-shadow: 0px 0px 16px 2px rgba(0, 0, 0, 0.2);\n  }\n}\n.carousel-upload {\n  &,\n  .ant-upload-btn,\n  .ant-upload-select {\n    display: inline-block;\n  width: 100%;\n  height: 100%;\n  }\n  .anticon-upload {\n    font-size: 20px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carousel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carousel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Carousel.vue?vue&type=template&id=63659e22&\"\nimport script from \"./Carousel.vue?vue&type=script&lang=js&\"\nexport * from \"./Carousel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Carousel.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Carousel.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VDialog } from 'vuetify/lib'\nimport { VImg } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {\n  VDialog,\n  VImg,\n  VLayout,\n})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carousel.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carousel.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}