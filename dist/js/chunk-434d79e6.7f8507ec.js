(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-434d79e6"],{"9c7f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editable-cell"},[t.editable?a("div",{staticClass:"editable-cell-input-wrapper"},[a("a-input",{ref:"editableInput",attrs:{value:t.value},on:{change:t.handleChange,pressEnter:t.check}}),a("a-icon",{staticClass:"editable-cell-icon-check",attrs:{type:"check"},on:{click:t.check}})],1):a("div",{staticClass:"editable-cell-text-wrapper"},[t._v("\r\n    "+t._s(t.value||" ")+"\r\n    "),a("a-icon",{staticClass:"editable-cell-icon",attrs:{type:"edit"},on:{click:t.edit}})],1)])},i=[],r=(a("cadf"),a("551c"),a("097d"),{props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(t){var e=t.target.value;this.value=e},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}),c=r,s=a("2877"),o=Object(s["a"])(c,n,i,!1,null,null,null);o.options.__file="EditableCell.vue";e["a"]=o.exports},feec:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"nvmanage-image",attrs:{row:"",wrap:""}},[a("div",{staticClass:"page-toolbar"},[a("a-upload",{attrs:{name:"file",multiple:!0,action:"/newview/manage/uploadImage"},on:{change:t.uploadImages}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" Click to Upload\n      ")],1)],1)],1),a("a-table",{attrs:{columns:t.columns,dataSource:t.images,bordered:""},scopedSlots:t._u([{key:"filePath",fn:function(e){return[a("v-img",{staticStyle:{cursor:"pointer"},attrs:{src:e.filePath,"lazy-src":e.smFilePath,width:144,height:81},on:{click:function(a){t.previewImage(e.filePath)}}})]}},{key:"imageTitle",fn:function(e){return[a("editable-cell",{attrs:{text:e.title},on:{change:function(a){t.onCellChange(e._id,a)}}})]}},{key:"action",fn:function(e){return a("span",{staticClass:"table-action"},[a("a-upload",{attrs:{name:"file",action:"/newview/manage/reuploadImage",data:{id:e._id}},on:{change:function(a){t.reuploadImage(e,a)}}},[a("a-tooltip",{attrs:{placement:"top",title:"重新上传图片"}},[a("a-icon",{attrs:{type:"upload"}})],1)],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-tooltip",{attrs:{placement:"top",title:"删除记录"}},[a("a-icon",{attrs:{type:"delete"},on:{click:function(a){t.removeRecord(e)}}})],1)],1)}}])}),a("v-dialog",{attrs:{scrollable:"","content-class":"image-pre-dialog"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-img",{attrs:{src:t.previewSrc,contain:""},on:{click:function(e){t.dialog=!1}}})],1)],1)},i=[],r=(a("96cf"),a("1da1")),c=(a("cadf"),a("551c"),a("097d"),a("3640")),s=a("9c7f"),o=[{title:"Image",width:"200px",scopedSlots:{customRender:"filePath"}},{title:"Title",scopedSlots:{customRender:"imageTitle"}},{title:"Action",width:"220px",scopedSlots:{customRender:"action"}}],l={components:{EditableCell:s["a"]},data:function(){return{images:[],columns:o,dialog:!1,previewSrc:""}},methods:{init:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].get("/manage/fetchImage");case 2:this.images=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),previewImage:function(t){this.previewSrc=t,this.dialog=!0},uploadImages:function(t){var e=t.file,a=t.file.status;if("done"===a){var n=e.response,i=n.code,r=n.msg;"0"===i?this.$message.success("上传成功"):this.$message.error(r),this.init()}else"error"===a&&this.$message.error("上传失败")},onCellChange:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].post("/manage/updateImageInfo",{id:e,title:a});case 2:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),reuploadImage:function(t,e){var a=e.file,n=e.file.status;if("done"===n){var i=a.response,r=i.code,c=i.msg;"0"===r?this.$message.success("修改成功"):this.$message.error(c),this.init()}else"error"===n&&this.$message.error("修改失败")},removeRecord:function(t){var e=this;this.$confirm({title:"删除记录",content:"是否确定要删除？",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){var a=Object(r["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(r["a"])(regeneratorRuntime.mark(function a(n,i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,c["a"].post("/manage/removeImage",{id:t._id});case 2:e.$message.success("删除成功"),e.images.splice(e.images.indexOf(t),1),n();case 5:case"end":return a.stop()}},a,this)}));return function(t,e){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a,this)}));function n(){return a.apply(this,arguments)}return n}()})}},mounted:function(){this.init()}},u=l,d=a("2877"),p=a("6544"),h=a.n(p),m=a("169a"),g=a("adda"),f=a("a722"),v=Object(d["a"])(u,n,i,!1,null,null,null);v.options.__file="Image.vue";e["default"]=v.exports;h()(v,{VDialog:m["a"],VImg:g["a"],VLayout:f["a"]})}}]);
//# sourceMappingURL=chunk-434d79e6.7f8507ec.js.map